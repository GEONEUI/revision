<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-compatible" content="chrome=1,IE=edge">
    <link rel="stylesheet" href="../library/js/jquery.1.12.4.js">
    <link rel="stylesheet" href="../library/css/common.css">
	<title>무스</title>
</head>
<style type="text/css">
.com_tit {
	margin: 100px 0 80px;
	font-size: 70px;
	text-align: center;
}

.sc_infinity {}

.sc_infinity .list {}

.sc_infinity .list:after {
	clear: both;
	display: block;
	content: '';
}

.sc_infinity .list li {
	float: left;
	width: 25%;
}

.sc_infinity .list li figure {
	padding: 10px;
}

.footer {
	height: 200px;
	background-color: #ddd;
}

.footer p {
	padding: 50px 20px;
}
</style>

<body>
	<div class="wrap">
		<section class="sec01">
			<h2 class="com_tit">INFINITE SCROLL</h2>
			<article class="sc_infinity">
				<ul class="list">
					<li>
						<figure>
							<img src="./images/1.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="./images/2.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="./images/3.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="./images/1.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="./images/2.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="./images/3.jpg">
						</figure>
					</li>
				</ul>
			</article>
			<div class="footer">
				<p>FOOTER</p>
			</div>
		</section>
	</div>
	<script>


        var mainvisual = document.querySelector('.sc_infinity');
        var el = document.querySelector('.list');
        var mainvisualTop;
        var winTop;
        var onTop;
        var breakList = 10;
        var current = 0;
       

        function getList(){
            current ++

            var list;

            if(current >= breakList){
                list = null;
            }else{
                list = '<li><figure><img src="./images/1.jpg"></figure></li>';
                list += '<li><figure><img src="./images/2.jpg"></figure></li>';
                list += '<li><figure><img src="./images/3.jpg"></figure></li>';
            }
             return list;

        }

        function setProperty(){
            mainvisualTop = mainvisual.getBoundingClientRect().top + window.pageYOffset;
            winTop = window.pageYOffset;
            onTop = document.body.offsetHeight - window.innerHeight - document.querySelector('.footer').offsetHeight;
        }



        function getMain(){
            setProperty();
           
            if(winTop >= onTop){

                var datainfo = getList();

                if(datainfo !== null){
                    var data = document.createElement('div');
                    data.innerHTML = datainfo;

                    var node = Array.from(data.children);
                    
                    node.forEach(function(element){
                        el.appendChild(element);
                    })


                }else{
                    return false
                }
                
            }
        }


		window.addEventListener('scroll', ()=>{
            getMain();

        });



		function init() {
            getMain();
		}

		init();

	</script>
</body>

</html>









